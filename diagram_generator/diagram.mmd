flowchart TD
  %% –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Å—Ç–∏–ª–∏
  classDef success fill:#99ff99,stroke:#008000,stroke-width:2px;
  classDef failure fill:#ff9999,stroke:#cc0000,stroke-width:2px;

  %% –û—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ—Ü–µ—Å—Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ username
  A[–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç] -->|–ó–∞–ø—Ä–æ—Å –≤ OpenAI| B[–ì–µ–Ω–µ—Ä–∞—Ü–∏—è n username]

  B -->|–û—Ç–≤–µ—Ç: n username config.GENERATED_USERNAME_COUNT| C[–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥–æ–≥–æ username]

  C --> D{–ó–∞–ø—Ä–æ—Å –∫ Telegram API: get_chat}
  D -- "chat –Ω–∞–π–¥–µ–Ω" --> E[Username –∑–∞–Ω—è—Ç -- –æ—Ç—Å–µ–∫–∞–µ–º]:::failure --> C
  D -- "chat not found" --> F[–ü—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ Fragment]

  F --> G{Fragment —Ä–µ–¥–∏—Ä–µ–∫—Ç?}
  G -- "–î–∞" --> H[‚úÖ –°–≤–æ–±–æ–¥–Ω–æ]:::success
  G -- "–ù–µ—Ç" --> I{Fragment —Å—Ç–∞—Ç—É—Å?}

  %% –û—Ç—Å–µ–∏–≤–∞–µ–º –Ω–µ–Ω—É–∂–Ω—ã–µ —Å—Ç–∞—Ç—É—Å—ã
  I -- "Available" --> J[üõç –î–æ—Å—Ç—É–ø–Ω–æ –¥–ª—è –ø–æ–∫—É–ø–∫–∏ -- –æ—Ç—Å–µ–∫–∞–µ–º]:::failure --> C
  I -- "Taken" --> K[‚ùå –ó–∞–Ω—è—Ç–æ -- –æ—Ç—Å–µ–∫–∞–µ–º]:::failure --> C
  I -- "Sold" --> L[üí∞ –ü—Ä–æ–¥–∞–Ω–æ -- –æ—Ç—Å–µ–∫–∞–µ–º]:::failure --> C
  I -- "–ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å" --> M[‚ö† –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –∏ –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º]:::failure --> C

  H --> N[–î–æ–±–∞–≤–ª—è–µ–º username –≤ —Å–ø–∏—Å–æ–∫]:::success
  N -->|n –¥–æ—Å—Ç–∏–≥–Ω—É—Ç–æ?| O{–ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞?}

  O -- "–î–∞" --> P[üéâ –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö username]:::success
  O -- "–ù–µ—Ç" --> B:::success

  %% –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
  N --> Q[–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ username –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö]:::success
  Q --> O

  %% ‚ùå –û—à–∏–±–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–µ—Ä—ã–≤–∞—é—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
  B -->|–û—à–∏–±–∫–∞ –≤ AI| X[‚ùå –û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏, —Å–æ–æ–±—â–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é]:::failure
  D -->|–û—à–∏–±–∫–∞ Telegram API| X:::failure
  F -->|–û—à–∏–±–∫–∞ Fragment API| X:::failure
  F -->|–û—à–∏–±–∫–∞ —Å–µ—Ç–∏| X:::failure
  O -- "–ü—Ä–µ–≤—ã—à–µ–Ω–æ –∫–æ–ª-–≤–æ –ø–æ–ø—ã—Ç–æ–∫" --> X[‚ùå –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –Ω–µ—É–¥–∞—á–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫, —Å–æ–æ–±—â–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é]:::failure

  %% –ü—Ä–∏–º–µ–Ω—è–µ–º —Å—Ç–∏–ª–∏
  class A,B,C,D,F,G,H,N,O,P,Q success;
  class E,J,K,L,M failure;
