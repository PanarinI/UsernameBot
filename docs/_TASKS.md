- [ ]
- [x]
## To-do
- [ ] описание уникальных преимуществ бота
- [ ] импортировать названия моделей AI списком для удобства выбора
- [ ] кнопка выбора режима создания имени именно для бота (проконсультироваться)
- [ ] настроить SSL на продакшн
- [ ] исследовать cli ("Если ты работаешь в терминале или PyCharm, это очень удобный инструмент для тестов и отладки")
- [ ] кнопки настройки генерации в интерфейс (температура, количество - может быть лишнее)
- [ ] автоматическое создание changelog'а было бы неплохо 
- [ ] изменить формат f"Вот сгенерированные для вас username по теме '{context_text}':", чтобы отличалось
- [ ] бесплатный AI API?
- [ ] user_flow вторая версия 
- [ ] выделить отдельной ошибкой случай, когда AI не отвечает из-за цензуры (сейчас "Не удалось сгенерировать доступные username. Попробуйте снова или вернитесь в главное меню")
- [ ] концепция продвижения - бонус тем, кто сделает больше 5 генераций - доступ к базе (если сообщение наберет n лайков)
- [ ] подтягивание совпадающих генераций из базы - но пока нет рациональности в этом, экономия пренебрежимо кажется мала
- [ ] выбор модели - в интерфейс бота
- [ ] оптимизация количества input токенов (сейчас около 200)
- [ ] имена в разном регистре букв - должны быть дублями в БЗ
- [ ] диаграмма логики БД
- [ ] описать логику формирования БД
- [ ] проверка на SQL-инъекции
- [ ] Опция - транслит (добавляет в промпт указание)
- [ ] развитие идеи платной подписки на развитие разработки
- 
## В процессе
- [ ] функция копирования сгенерированных ответов (по ЛКМ)
- [ ] создание сообщества. Приветствие: это открытый проект. Предлагайте ваши идеи, куда его развернуть (обдумать такой вариант). Заодно это сообщество по поиску соавторов, единомышленников, клиентов
- [ ] фишка:
- [ ] ввод контекста должен заинтриговывать - прописать текст, добавить идею


## Завершённые
- 30.02 - 4.02
- [x] Реализовать базовую генерацию username.
- [x] перенести конфиденциальые данные в .env (python-dotenv)
- [x] Не работает кнопка "сгенерировать еще раз" после генерации # callback присвоил "generate", тот же что при первой генерации. 
- [x] Реализовать базовое логирование # реализовано  для service.generate, режим DEBUG 
- [x] перенести регулировку количества генераций и выводов на клавиатуру в config. Протестировать условия
- [x] Создана mmd-диаграма tech_flow (в трех версиях)
- [x] Организация документации
- [x] Комментирование модулей  - services и handlers
- [x] Проработать README с навигацией по документации
- [x] bug бесконечный цикл генерации одного и того же занятого username -- fix: не абсолютный. добавил в промпт "уникальных" + увеличил партию gen=5, avail=3. Вероятность цикла минимальна.
- [x] При ошибки генерации добавить навигацию с возвратом в меню или повтором операции
- [x] Первичное тестирование моделей # gemini-flash
- [x] user_flow базово 
- [x] диаграммы tech_flow --> mmd
- 05.02
- [x] убрать .env из ёбаного гитхаба. Сука!
- [x] Исправить проблему генерации: если нужен бот (чётко прописано в контексте или реализовано как checkbox: бот / канал / сообщество), то валидный только с "bot" на конце 
- [x] добавить команды типа /start для generate и check 
- [x] тестирование всей навигации на логику
- [x] bug после генерации если ввести заново не нажав на кнопку - ничего не произойдет. Нужно вывести подсказку при введении вроде "выберите действие"
- [x] красиво оформить тексты кнопок и описаний
- [x] оптимизировать количество запросов - чтобы за 1 запрос получался список из трёх
- 06.02
- [x] Переделать меню, чтобы прежняя клавиатура исчезала - вариант редактирования предыдущего сообщения -- оказался от идеи. пусть сохраняется как чат
- [x] Приделать кнопки возврата в меню из состояний FSM
- [x] протестировать как работает git branch
- [x] настроить промпт чтобы не выдавало bot в username без прямого указания от пользователя (тумблер - "бот")
- [x] описать возможности настройки бота через конфиг
- 09-10.02
- [x] нарисовать диаграммы для user_flow
- [x] добработать вариант TelegramForbiddenError: Telegram server says - Forbidden: bot was kicked from the channel chat
- [x] понять логирование
- [x] где время таймаута при генерации?
- [x] функцию логирования перенести в отдельный модуль из конфига
- [x] установить лимиты на количество попыток (если всё занято, чтобы не было бесконечности); время ответа модели (чтобы не было бесконечного ожидания ответа)
- [x] Механизм предотвращения бесконечных/избыточных запросов генерации. (При генерации с моделью deepseek-r1 возвращает None: DeepAttributeError: 'NoneType' object has no attribute 'strip'. 
- [x] определить концепцию базы данных -- PostgreSQL, таблица, запись в базу
- 11.02
- [x] Установить ограничение на длину ввода контекста и вынести в конфиг -- MAX_CONTEXT_LENGTH
- [x] База данных привязка, тестирование
- [x] счетчик input+output tokens -- метод response.usage
- [x] генерация категории для сгенерированных username -- прошу указывать обобщенные категории

- 12.02
- [x] добавить логирование бана от Telegram API и вывод в главное меню с уведомлением о тайм-ауте
- [x] дизайн персонажа бота
- [x] bug в БД статус FLOOD_CONTROL
- 13.02
- [x] перенос бота на сервер - выбор сервера, requirements -- Amvera.
- [x] как настроить requirements
14.02
- [x] корректный запуск бота либо локально либо с Amvera, но не параллельно
15.02
- [x] внесение в БЗ результата check username
- [x] вебхук на сервере и polling если локально
- [x] перенос БД на Amvera, подключение к боту, проверка
- [x] выводить сообщение ожидания при генерировании -- песочные часы
- [x] чёткое логирование в bot.log если локально, в консоль если amvera



Привет. Я недавно начал разрабатывать телеграм-ботов и сейчас у меня готов первый бот, коиторый я хочу показать миру. Он... простой, но в нем что-то есть. Его зовут Имялов, или NameHunter, и он генерирует несколько юзернеймов по введенному пользователем контексту. Особенность (мой беглый анализ аналогов в интернете позволяет сказать, что это вероятно особенность) в том, что юзернеймы выдаются уже проверенные на уникальность. А также все сгенерированные юзернеймы (и занятые и свободные) регистрируются в базе данных с указанием контекста и категории запроса ("магазин обуви", "ник для игры"). Юзернеймы и категория генерируются LLM через промпт с указанием сгенерировать уникальный и (оригинальный, )юзернейм